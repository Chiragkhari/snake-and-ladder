<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snake and ladders</title>
    
    
    <link rel="stylesheet" href="./mycss.css">
</head>

<body>
    <button id="button" onclick="rolldice()">rolldice</button>
    <br>
    <div id="diceandchance"><p id="dice"></p>
        <br>
        <br>
        <p id="Playerchance"></p></div>
    <div id="matrix"></div>
    <div id="ladder"></div>
    <div class="snake1"></div>
    <div class="snake2"></div>
    <div class="snake3"></div>
    <div class="ladder2"></div>
    <div class="ladder3"></div>
    <div class="ladder4"></div>
    <div class="snake4"></div>
    <div class="snake5"></div>
    <div class="ladder5"></div>  
  <script>
        let count = 0;
        var m = [9, 0];
        var n = [9, 0];
        var mat = new Array(10).fill(0)
        for (i = 0; i < 10; i++) {
            mat[i] = new Array(10).fill(0)
        }
        mat[9][9] = "L1"
        mat[4][9]=  "L2"
        mat[8][4]= "L3"
        mat[7][1]= "L4"
        mat[4][3]="L5"
        mat[0][1]= "S1"
        mat[2][5]= "S2"
        mat[3][2]= "S3"
        mat[5][8]= "S4"
        mat[7][2]= "S5"
        const obj = {
            "L1": { "zero" : 5,
                    "one" :7
                },
            "L2":{ "zero" : 0,
                   "one" : 8
                     },
                "L3":{"zero":2,
                       "one" :6
                },
                "L4":{"zero":5,
                        "one":2
                    },

        
                 "L5":{"zero":2,
                       "one":4
                    },

             "S1" :{ "zero" :6, 
                  "one" : 1
             },  
             "S2":{"zero":7,
                "one" : 6
            },
            "S3":{"zero" : 5,
                "one" : 4
            },
            "S4":{"zero":8,
                     "one":6
                    },      
                    "S5":{"zero":9,
                       "one":1
                    } 
         
}
        const chance = document.createElement("p")

        const para = document.createElement("p")
        let flag = false
        let trap = false
        const buttonDice = document.getElementById("button");
        buttonDice.innerText = ""
        setInterval(function () {
            buttonDice.style.backgroundImage = "url(./dice.gif)"
        }, 3000)
        function rolldice() {

            if (count > 0 && count % 2 !=0) {

                mat[m[0]][m[1]] = 0;
                var diceValue = Math.floor(Math.random() * 6) + 1;
                
                buttonDice.style.backgroundImage = `url('./${diceValue}.png')`;
                buttonDice.style.backgroundSize = "100% 100%";
                para.innerText = ("Dice value = " + diceValue)
                dice.appendChild(para)
                console.log(diceValue)
               chance.innerText = "Player 2 Chance"
               Playerchance.appendChild(chance)
        
                if (diceValue == 6) { flag = true }
                // if odd values then dice value being added to row, column is kept enact.
                if (flag) {

                    if (m[0] % 2 != 0) {
                        m[1] += diceValue
                        console.log(m)
                    }

                    else if (m[1] == 9 && m[0] % 2 != 0) {
                        m[0]--
                        m[1] -= diceValue // return m;
                        console.log(m)
                    }
                    if (m[1] > 9 && m[0] % 2 != 0) {
                        m[0]--
                        if (m[0] > 5) {
                            m[1] = 11 - ((m[1] - m[0]))
                        }
                        else if (m[0] <= 5 && m[0] != 0) {
                            m[1] = 15 - ((m[1] - m[0]))
                        }
                        else if (m[0] == 0) {
                            m[1] -= diceValue
                        }
                        console.log(m)

                    }



                    else if (m[0] % 2 == 0 && m[1] > 0) {
                        m[1] -= diceValue
                        console.log(m)

                    }
                    else if (m[0] % 2 == 0 && m[1] == 0) {
                        m[1] += diceValue - 1
                        m[0]--
                        console.log(m)
                    }
                    if (m[0] % 2 == 0 && m[1] < 0 && diceValue > 3) {
                        m[0]--;
                        m[1] += diceValue - 1
                        console.log(m)
                    }
                    else if (m[0] % 2 == 0 && m[1] < 0 && diceValue <= 3) {
                        m[0]--;
                        m[1] += diceValue + 1
                        console.log(m)
                    }
                    // if (m=[3,0]) {
                    //     m=[8,1]
                    // }

                    console.log({ m })
                    // var matrix = document.getElementById("matrix")
                    if (m[0] == 0 && m[1] == 0) {
                        alert("Player 1 wins ")
                    }
                    if (m[0] == 0 && diceValue > (m[1] - m[0])) {
                        m;
                    }
                    if (m[0] == 0 && diceValue < (m[1] - m[0])) {
                        m[1] -= diceValue
                    }
                    ;
                 }
                 snakeBite()
            mat[m[0]][m[1]] = "<img src='./goti1.svg' alt='Player1' width='' height='   '>"}
            
            if (count > 0 && count % 2 == 0) {
    mat[n[0]][n[1]] = 0;
    var diceValue = Math.floor(Math.random() * 6) + 1;
    buttonDice.style.backgroundImage = `url('./${diceValue}.png')`;
    buttonDice.style.backgroundSize = "100% 100%";
    para.innerText = ("Dice value = " + diceValue)
    dice.appendChild(para)
    console.log(diceValue)
    
    chance.innerText = "Player 1 Chance"
     Playerchance.appendChild(chance)
        
    
    if (diceValue == 6) { trap = true }
    // if odd values then dice value being added to row, column is kept enact.
    if (trap) {

        if (n[0] % 2 != 0) {
            n[1] += diceValue
            console.log(n)
        }

        else if (n[1] == 9 && n[0] % 2 != 0) {
            n[0]--
            n[1] -= diceValue // return m;
            console.log(n)
        }
        if (n[1] > 9 && n[0] % 2 != 0) {
            n[0]--
            if (n[0] > 5) {
                n[1] = 11 - ((n[1] - n[0]))
            }
            else if (n[0] <= 5 && n[0] != 0) {
                n[1] = 15 - ((n[1] - n[0]))
            }
            else if (n[0] == 0) {
                n[1] -= diceValue
            }
            console.log(n)

        }



        else if (n[0] % 2 == 0 && n[1] > 0) {
            n[1] -= diceValue
            console.log(n)

        }
        else if (n[0] % 2 == 0 && n[1] == 0) {
            n[1] += diceValue - 1
            n[0]--
            console.log(n)
        }
        if (n[0] % 2 == 0 && n[1] < 0 && diceValue > 3) {
            n[0]--;
            n[1] += diceValue - 1
            console.log(n)
        }
        else if (n[0] % 2 == 0 && n[1] < 0 && diceValue <= 3) {
            n[0]--;
            n[1] += diceValue + 1
            console.log(n)
        }
        // if (m=[3,0]) {
        //     m=[8,1]
        // }

        console.log({ n })
        // var matrix = document.getElementById("matrix")
        if (n[0] == 0 && n[1] == 0) {
            alert("Player 2 wins ")
        }
        if (n[0] == 0 && diceValue > (n[1] - n[0])) {
            n;
        }
        if (n[0] == 0 && diceValue < (n[1] - n[0])) {
            n[1] -= diceValue
        }
        ;
    }
    snakeBite2()
    mat[n[0]][n[1]] = "<img src='./goti2.svg' alt='Player2' width='20px' height='50px'>"
}
mat[m[0]][m[1]] = "<img src='./goti1.svg' alt='Player1' width='20px' height='50px'>"
mat[n[0]][n[1]] = "<img src='./goti2.svg' alt='Player2' width='20px' height='50px'>"

            
            count++
            printTable(mat)
        }
                
        rolldice()
        function printTable(mat) {
            let str = "<table border ='1px' cellspacing = '0' width='300px height='300px' >"
            for (let a = 0; a < 10; a++) {
                str += "<tr>";
                for (b = 0; b < 10; b++) {
                    str += "<td>" + mat[a][b] + "</td>"
                }
                str += "</tr>"
            }
            str += "</table>"
            document.getElementById("matrix").innerHTML = str
        }
        function snakeBite() {
            var prevPos = mat[m[0]][m[1]]
            let [x, y] = m
            console.log(prevPos)
            if (mat[m[0]][m[1]] != "0" && mat[m[0]][m[1]] != "1" ) {
                x = obj[mat[m[0]][m[1]]].zero;
                y = obj[mat[m[0]][m[1]]].one;
                console.log(mat[x][y], x, y, mat[m[0]][m[1]])

            }                  
            mat[x][y]  = '1'
            m = [x,y]
           }
          
          
           function snakeBite2() {
    var prevPos = mat[n[0]][n[1]]
    let [x, y] = n
    console.log(prevPos)
    if (mat[n[0]][n[1]] != "0" && mat[n[0]][n[1]] != "1" && mat[n[0]][n[1]]!= "2" ) {
        x = obj[mat[n[0]][n[1]]].zero;
        y = obj[mat[n[0]][n[1]]].one;
        console.log(mat[x][y], x, y, mat[n[0]][n[1]])

    }                  
    mat[x][y]  = '2'
    n = [x,y]
   }     

    </script>
</body>

</html>